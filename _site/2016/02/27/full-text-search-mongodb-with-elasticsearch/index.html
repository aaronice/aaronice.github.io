<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Blog on technology, life, thinking, etc.">

    <title>MongoDB & ElasticSearch For Full Text Search In Chinese - Code Is Not Cold</title>

    <link rel="canonical" href="aaronice.github.io/2016/02/27/full-text-search-mongodb-with-elasticsearch/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Code Is Not Cold</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Home</a>
                </li>
                
                <li>
                    <a href="/about/">About</a>
                </li>
                
                <li>
                    <a href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<header class="intro-header" style="background-image: url('/')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>MongoDB & ElasticSearch For Full Text Search In Chinese</h1>
                    
                    <h2 class="subheading">A simple tutorial on how to use mongo-connector with MongoDB and ElasticSearch</h2>
                    
                    <span class="meta">Posted by aaronice on February 27, 2016</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

                <h1 id="mongodb--elasticsearch-for-full-text-search-in-chinese">MongoDB &amp; ElasticSearch For Full Text Search In Chinese</h1>

<p>MongoDB’s full text search for Chinese only available in Enterprise version. Alternatively, we can use ElasticSearch. The difficult part is how to connect/synchronize data in MongoDB and ElasticSearch. And <a href="https://github.com/mongodb-labs/mongo-connector/wiki">mongo-connector</a> seems to be good option.</p>

<h2 id="mongo---connector">Mongo - Connector</h2>

<p>Install <code class="highlighter-rouge">elasticsearch</code></p>

<p><code class="highlighter-rouge">
brew install elasticsearch
</code></p>

<p>Start Elastic Search</p>

<p><code class="highlighter-rouge">
elasticsearch
</code></p>

<p>Create a directory for replica set</p>

<p><code class="highlighter-rouge">
mkdir -p /data/db_rs
</code></p>

<p>Start <code class="highlighter-rouge">mongod</code> instance for replica set (the port here is different from default <code class="highlighter-rouge">27017</code>)</p>

<p><code class="highlighter-rouge">
mongod --port 27018 --dbpath /data/db_rs --replSet rs0
</code></p>

<p>(may require <code class="highlighter-rouge">sudo</code>)</p>

<p>Use <code class="highlighter-rouge">mongo-connector</code> to connect MongoDB and Elastic Search</p>

<p><code class="highlighter-rouge">
mongo-connector --auto-commit-interval=0 -m localhost:27018 -t localhost:9200 -d elastic_doc_manager
</code></p>

<h2 id="test">Test</h2>

<h3 id="search-request">Search request</h3>
<p><code class="highlighter-rouge">
curl -XPOST 'http://localhost:9200/pikachu/_search?pretty=true' -d '{
  "query": {
    "filtered": {
      "query": {
        "match": {
          "name": {
            "query": "慕斯"
          }
        }
      },
      "filter": {
        "term": {
          "_type": "recipes"
        }
      }
    }
  }
}'
</code></p>

<h3 id="response">Response</h3>

<p><code class="highlighter-rouge"><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"took"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">37</span><span class="p">,</span><span class="w">
  </span><span class="nt">"timed_out"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_shards"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"total"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="nt">"successful"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="nt">"failed"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"hits"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"total"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">21</span><span class="p">,</span><span class="w">
    </span><span class="nt">"max_score"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">4.257974</span><span class="p">,</span><span class="w">
    </span><span class="nt">"hits"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"_index"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"pikachu"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"recipes"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"recipe:110104"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_score"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">4.257974</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_source"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"rating"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">7.7</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"芒果慕斯"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"dishes"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1849</span><span class="p">,</span><span class="w">
        </span><span class="nt">"ingredients"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"芒果"</span><span class="p">,</span><span class="w"> </span><span class="s2">"牛奶"</span><span class="p">,</span><span class="w"> </span><span class="s2">"淡奶"</span><span class="p">,</span><span class="w"> </span><span class="s2">"戚风蛋糕"</span><span class="p">,</span><span class="w"> </span><span class="s2">"鱼胶片"</span><span class="p">,</span><span class="w"> </span><span class="s2">"细砂糖"</span><span class="w"> </span><span class="p">],</span><span class="w">
        </span><span class="nt">"image"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://s2.cdn.xiachufang.com/1f5fde067d2411e5ae46b82a72e00100.jpg"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"comments"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">97</span><span class="p">,</span><span class="w">
        </span><span class="nt">"dateCreated"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2011-11-01"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"cooked"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1539</span><span class="p">,</span><span class="w">
        </span><span class="nt">"__v"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nt">"likes"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">38264</span><span class="p">,</span><span class="w">
        </span><span class="nt">"categories"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"20135"</span><span class="p">,</span><span class="w"> </span><span class="s2">"40072"</span><span class="p">,</span><span class="w"> </span><span class="s2">"20158"</span><span class="p">,</span><span class="w"> </span><span class="s2">"51295"</span><span class="p">,</span><span class="w"> </span><span class="s2">"52408"</span><span class="w"> </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"_index"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"pikachu"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"recipes"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"recipe:100493899"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_score"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">3.893651</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_source"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"rating"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">8.3</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"芒果慕斯"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"dishes"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">382</span><span class="p">,</span><span class="w">
        </span><span class="nt">"ingredients"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"芒果泥"</span><span class="p">,</span><span class="w"> </span><span class="s2">"淡奶油"</span><span class="p">,</span><span class="w"> </span><span class="s2">"吉利丁片"</span><span class="p">,</span><span class="w"> </span><span class="s2">"糖粉（按芒果甜度加减)"</span><span class="w"> </span><span class="p">],</span><span class="w">
        </span><span class="nt">"image"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://s2.cdn.xiachufang.com/f2a0d9867ebf11e5a55ab82a72e00100.jpg"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"comments"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">132</span><span class="p">,</span><span class="w">
        </span><span class="nt">"dateCreated"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-05-15"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"cooked"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">309</span><span class="p">,</span><span class="w">
        </span><span class="nt">"__v"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nt">"likes"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">13107</span><span class="p">,</span><span class="w">
        </span><span class="nt">"categories"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"51295"</span><span class="w"> </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"_index"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"pikachu"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"recipes"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"recipe:267990"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_score"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">3.8853025</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_source"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"rating"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">7.6</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"榴莲慕斯"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"dishes"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">261</span><span class="p">,</span><span class="w">
        </span><span class="nt">"ingredients"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"低筋面粉"</span><span class="p">,</span><span class="w"> </span><span class="s2">"鸡蛋"</span><span class="p">,</span><span class="w"> </span><span class="s2">"色拉油"</span><span class="p">,</span><span class="w"> </span><span class="s2">"鲜牛奶"</span><span class="p">,</span><span class="w"> </span><span class="s2">"细砂糖"</span><span class="p">,</span><span class="w"> </span><span class="s2">"细砂糖"</span><span class="p">,</span><span class="w"> </span><span class="s2">"榴莲肉"</span><span class="p">,</span><span class="w"> </span><span class="s2">"淡奶油"</span><span class="p">,</span><span class="w"> </span><span class="s2">"吉利丁片"</span><span class="p">,</span><span class="w"> </span><span class="s2">"牛奶"</span><span class="p">,</span><span class="w"> </span><span class="s2">"糖"</span><span class="p">,</span><span class="w"> </span><span class="s2">"淡奶油"</span><span class="p">,</span><span class="w"> </span><span class="s2">"糖"</span><span class="p">,</span><span class="w"> </span><span class="s2">"黄油"</span><span class="p">,</span><span class="w"> </span><span class="s2">"糖粉"</span><span class="p">,</span><span class="w"> </span><span class="s2">"牛奶"</span><span class="p">,</span><span class="w"> </span><span class="s2">"朗姆酒"</span><span class="p">,</span><span class="w"> </span><span class="s2">"wilton橙色素"</span><span class="p">,</span><span class="w"> </span><span class="s2">"抹茶粉"</span><span class="p">,</span><span class="w"> </span><span class="s2">"白巧克力"</span><span class="w"> </span><span class="p">],</span><span class="w">
        </span><span class="nt">"image"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://s2.cdn.xiachufang.com/a5c2aed47d4411e5936449a26463ae26.jpg"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"comments"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span><span class="w">
        </span><span class="nt">"dateCreated"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-04-15"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"cooked"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">209</span><span class="p">,</span><span class="w">
        </span><span class="nt">"__v"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nt">"likes"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">5161</span><span class="p">,</span><span class="w">
        </span><span class="nt">"categories"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"51295"</span><span class="p">,</span><span class="w"> </span><span class="s2">"20135"</span><span class="p">,</span><span class="w"> </span><span class="s2">"40072"</span><span class="p">,</span><span class="w"> </span><span class="s2">"20158"</span><span class="w"> </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"_index"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"pikachu"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"recipes"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"recipe:100045187"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_score"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">3.8633535</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_source"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"rating"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">8.5</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"草莓慕斯"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"dishes"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">4298</span><span class="p">,</span><span class="w">
        </span><span class="nt">"ingredients"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"蛋糕胚"</span><span class="p">,</span><span class="w"> </span><span class="s2">"草莓"</span><span class="p">,</span><span class="w"> </span><span class="s2">"草莓酱"</span><span class="p">,</span><span class="w"> </span><span class="s2">"动物性淡奶油"</span><span class="p">,</span><span class="w"> </span><span class="s2">"吉丁片"</span><span class="p">,</span><span class="w"> </span><span class="s2">"砂糖"</span><span class="p">,</span><span class="w"> </span><span class="s2">"草莓口味QQ糖（镜面）"</span><span class="w"> </span><span class="p">],</span><span class="w">
        </span><span class="nt">"image"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://s2.cdn.xiachufang.com/2ffd81d47dc011e5a291753d7a9f68b0.jpg"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"comments"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">167</span><span class="p">,</span><span class="w">
        </span><span class="nt">"dateCreated"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-12-03"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"cooked"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">3639</span><span class="p">,</span><span class="w">
        </span><span class="nt">"__v"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nt">"likes"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">76904</span><span class="p">,</span><span class="w">
        </span><span class="nt">"categories"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"20158"</span><span class="p">,</span><span class="w"> </span><span class="s2">"51295"</span><span class="p">,</span><span class="w"> </span><span class="s2">"20135"</span><span class="p">,</span><span class="w"> </span><span class="s2">"52382"</span><span class="w"> </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"_index"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"pikachu"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"recipes"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"recipe:100427641"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_score"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">3.1934805</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_source"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"rating"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">6.7</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"樱花草莓慕斯"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"dishes"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">95</span><span class="p">,</span><span class="w">
        </span><span class="nt">"ingredients"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"模具：2寸水滴形慕斯圈5个"</span><span class="p">,</span><span class="w"> </span><span class="s2">"海绵蛋糕："</span><span class="p">,</span><span class="w"> </span><span class="s2">"慕斯层："</span><span class="p">,</span><span class="w"> </span><span class="s2">"淡奶油"</span><span class="p">,</span><span class="w"> </span><span class="s2">"草莓"</span><span class="p">,</span><span class="w"> </span><span class="s2">"细砂糖"</span><span class="p">,</span><span class="w"> </span><span class="s2">"吉利丁"</span><span class="p">,</span><span class="w"> </span><span class="s2">"镜面："</span><span class="p">,</span><span class="w"> </span><span class="s2">"雪碧"</span><span class="p">,</span><span class="w"> </span><span class="s2">"吉利丁"</span><span class="p">,</span><span class="w"> </span><span class="s2">"水"</span><span class="p">,</span><span class="w"> </span><span class="s2">"盐渍樱花"</span><span class="w"> </span><span class="p">],</span><span class="w">
        </span><span class="nt">"image"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://s2.cdn.xiachufang.com/e76393c07e8711e591e65dfac8d4b0dd.jpg"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"comments"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">29</span><span class="p">,</span><span class="w">
        </span><span class="nt">"dateCreated"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-12-31"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"cooked"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">82</span><span class="p">,</span><span class="w">
        </span><span class="nt">"__v"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nt">"likes"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">6266</span><span class="p">,</span><span class="w">
        </span><span class="nt">"categories"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"51295"</span><span class="p">,</span><span class="w"> </span><span class="s2">"20158"</span><span class="w"> </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"_index"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"pikachu"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"recipes"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"recipe:1026011"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_score"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">2.9202383</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_source"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"rating"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">8.2</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"草莓慕斯蛋糕"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"dishes"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">5885</span><span class="p">,</span><span class="w">
        </span><span class="nt">"ingredients"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"海绵蛋糕"</span><span class="p">,</span><span class="w"> </span><span class="s2">"淡奶油"</span><span class="p">,</span><span class="w"> </span><span class="s2">"草莓"</span><span class="p">,</span><span class="w"> </span><span class="s2">"吉利丁片"</span><span class="p">,</span><span class="w"> </span><span class="s2">"糖"</span><span class="w"> </span><span class="p">],</span><span class="w">
        </span><span class="nt">"image"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://s2.cdn.xiachufang.com/a75046847d6011e583dfb82a72e00100.jpg"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"comments"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">204</span><span class="p">,</span><span class="w">
        </span><span class="nt">"dateCreated"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-03-25"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"cooked"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">4694</span><span class="p">,</span><span class="w">
        </span><span class="nt">"__v"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nt">"likes"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">69149</span><span class="p">,</span><span class="w">
        </span><span class="nt">"categories"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"20158"</span><span class="p">,</span><span class="w"> </span><span class="s2">"51295"</span><span class="p">,</span><span class="w"> </span><span class="s2">"51761"</span><span class="p">,</span><span class="w"> </span><span class="s2">"52387"</span><span class="w"> </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"_index"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"pikachu"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"recipes"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"recipe:261742"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_score"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">2.9202383</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_source"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"rating"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">6.7</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"巧克力慕斯杯"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"dishes"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">212</span><span class="p">,</span><span class="w">
        </span><span class="nt">"ingredients"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"黑巧克力"</span><span class="p">,</span><span class="w"> </span><span class="s2">"淡奶油"</span><span class="p">,</span><span class="w"> </span><span class="s2">"牛奶"</span><span class="p">,</span><span class="w"> </span><span class="s2">"细砂糖"</span><span class="p">,</span><span class="w"> </span><span class="s2">"吉利丁粉"</span><span class="p">,</span><span class="w"> </span><span class="s2">"清水"</span><span class="p">,</span><span class="w"> </span><span class="s2">"糖粉"</span><span class="p">,</span><span class="w"> </span><span class="s2">"可可粉"</span><span class="p">,</span><span class="w"> </span><span class="s2">"棍子饼干"</span><span class="p">,</span><span class="w"> </span><span class="s2">"巧克力花片"</span><span class="p">,</span><span class="w"> </span><span class="s2">"黑巧克力碎"</span><span class="w"> </span><span class="p">],</span><span class="w">
        </span><span class="nt">"image"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://s2.cdn.xiachufang.com/b497c1a67d4111e582b9b82a72e00100.jpg"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"comments"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="w">
        </span><span class="nt">"dateCreated"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-11-01"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"cooked"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">195</span><span class="p">,</span><span class="w">
        </span><span class="nt">"__v"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nt">"likes"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">6933</span><span class="p">,</span><span class="w">
        </span><span class="nt">"categories"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"51295"</span><span class="p">,</span><span class="w"> </span><span class="s2">"20135"</span><span class="p">,</span><span class="w"> </span><span class="s2">"20158"</span><span class="p">,</span><span class="w"> </span><span class="s2">"52405"</span><span class="p">,</span><span class="w"> </span><span class="s2">"52408"</span><span class="w"> </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"_index"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"pikachu"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"recipes"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"recipe:267810"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_score"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">2.897515</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_source"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"rating"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">7.2</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"酸奶慕斯HelloKitty蛋糕"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"dishes"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">397</span><span class="p">,</span><span class="w">
        </span><span class="nt">"ingredients"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"原味酸奶"</span><span class="p">,</span><span class="w"> </span><span class="s2">"淡奶油"</span><span class="p">,</span><span class="w"> </span><span class="s2">"糖粉"</span><span class="p">,</span><span class="w"> </span><span class="s2">"柠檬汁"</span><span class="p">,</span><span class="w"> </span><span class="s2">"吉利丁片"</span><span class="p">,</span><span class="w"> </span><span class="s2">"温水"</span><span class="p">,</span><span class="w"> </span><span class="s2">"红色素"</span><span class="p">,</span><span class="w"> </span><span class="s2">"黄色素"</span><span class="p">,</span><span class="w"> </span><span class="s2">"黑巧克力"</span><span class="w"> </span><span class="p">],</span><span class="w">
        </span><span class="nt">"image"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://s2.cdn.xiachufang.com/8d32fa237d4411e58c6813a10792eddb.jpg"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"comments"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
        </span><span class="nt">"dateCreated"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-04-09"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"cooked"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">313</span><span class="p">,</span><span class="w">
        </span><span class="nt">"__v"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nt">"likes"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">6069</span><span class="p">,</span><span class="w">
        </span><span class="nt">"categories"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"20135"</span><span class="p">,</span><span class="w"> </span><span class="s2">"20158"</span><span class="p">,</span><span class="w"> </span><span class="s2">"51295"</span><span class="w"> </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"_index"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"pikachu"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"recipes"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"recipe:100033996"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_score"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">2.695013</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_source"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"rating"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">7.4</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"鲜橙慕斯蛋糕"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"dishes"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">285</span><span class="p">,</span><span class="w">
        </span><span class="nt">"ingredients"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"A、细砂糖50g，清水50g，橙片6片"</span><span class="p">,</span><span class="w"> </span><span class="s2">"B、蛋黄2颗、鲜奶100g，细砂糖15g"</span><span class="p">,</span><span class="w"> </span><span class="s2">"C、鱼胶粉3+1/4小匙，清水4大匙"</span><span class="p">,</span><span class="w"> </span><span class="s2">"D、动物鲜奶油200g，细砂糖20g，白"</span><span class="p">,</span><span class="w"> </span><span class="s2">"E、鲜榨橙汁100g，鱼胶粉1/2小匙"</span><span class="p">,</span><span class="w"> </span><span class="s2">"F、鲜榨橙汁40g，细砂糖5g，鱼胶粉1/2小匙，清水1大匙"</span><span class="p">,</span><span class="w"> </span><span class="s2">"G：6寸海绵蛋糕一个"</span><span class="w"> </span><span class="p">],</span><span class="w">
        </span><span class="nt">"image"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://s2.cdn.xiachufang.com/75f555ab7dba11e5a4b023a6ba65962e.jpg"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"comments"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span><span class="w">
        </span><span class="nt">"dateCreated"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-10-15"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"cooked"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">255</span><span class="p">,</span><span class="w">
        </span><span class="nt">"__v"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nt">"likes"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">9722</span><span class="p">,</span><span class="w">
        </span><span class="nt">"categories"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"20158"</span><span class="p">,</span><span class="w"> </span><span class="s2">"51761"</span><span class="p">,</span><span class="w"> </span><span class="s2">"51295"</span><span class="w"> </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"_index"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"pikachu"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"recipes"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"recipe:100409082"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_score"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">2.4283142</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_source"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"rating"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">8.4</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"火龙果慕斯（小蛋糕）"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"dishes"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">970</span><span class="p">,</span><span class="w">
        </span><span class="nt">"ingredients"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"火龙果液"</span><span class="p">,</span><span class="w"> </span><span class="s2">"吉利丁片"</span><span class="p">,</span><span class="w"> </span><span class="s2">"淡奶油"</span><span class="p">,</span><span class="w"> </span><span class="s2">"糖"</span><span class="p">,</span><span class="w"> </span><span class="s2">"饼干底材料"</span><span class="p">,</span><span class="w"> </span><span class="s2">"优冠饼干"</span><span class="p">,</span><span class="w"> </span><span class="s2">"黄油"</span><span class="w"> </span><span class="p">],</span><span class="w">
        </span><span class="nt">"image"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://s2.cdn.xiachufang.com/d01bb03a7e7b11e5bf260b5e6de623fb.jpg"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"comments"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">214</span><span class="p">,</span><span class="w">
        </span><span class="nt">"dateCreated"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-11-18"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"cooked"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">746</span><span class="p">,</span><span class="w">
        </span><span class="nt">"__v"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nt">"likes"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">26205</span><span class="p">,</span><span class="w">
        </span><span class="nt">"categories"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"51295"</span><span class="p">,</span><span class="w"> </span><span class="s2">"20158"</span><span class="w"> </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></p>

<h2 id="dump-and-restore">Dump and Restore</h2>

<p>Dump files from MongoDB</p>

<p><code class="highlighter-rouge">
mongodump
</code></p>

<p>It will dump to <code class="highlighter-rouge">/dump</code> folder by default, or you my specify a path to the dump.</p>

<p>Restore using the dumped files</p>

<p><code class="highlighter-rouge">
mongorestore --host &lt;hostname&gt;&lt;:port&gt;
</code></p>

<p>You’ll have to be in the directory that contains the /dump folder, which comes from the <code class="highlighter-rouge">mongodump</code>. And the hostname and port should be the <code class="highlighter-rouge">replSet</code> hostname: <code class="highlighter-rouge">localhost</code>, port: <code class="highlighter-rouge">27018</code></p>

<h2 id="re-sync">Re-sync</h2>
<p>If necessary, may consider <strong>re-sync</strong> MongoDB with ElasticSearch:</p>

<p>You can remove all data quickly and efficiently by <a href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/indices-delete-index.html">deleting the index</a> and <a href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/indices-create-index.html">re-creating</a> it: (here the hostname is <code class="highlighter-rouge">localhost</code>, port is <code class="highlighter-rouge">27018</code>, index name is <code class="highlighter-rouge">pikachu</code>)</p>

<p><code class="highlighter-rouge">
curl -XDELETE http://&lt;hostname&gt;:&lt;port&gt;/&lt;index name&gt; curl -XPUT http://&lt;hostname&gt;:&lt;port&gt;/&lt;index name&gt;
</code></p>

<p>After this, you should refresh the index to make these changes visible:</p>

<p><code class="highlighter-rouge">
curl -XPOST http://&lt;hostname&gt;:&lt;port&gt;/&lt;index name&gt;/_refresh
</code></p>

<h2 id="reference">Reference</h2>

<ul>
  <li><a href="http://blog.csdn.net/yeasy/article/details/47842437">用 mongodb + elasticsearch 实现中文检索</a></li>
  <li><a href="http://www.csdn.net/article/2014-09-02/2821485-how-to-perform-fuzzy-matching-with-mongo-connector?">使用Mongo Connector和Elasticsearch实现模糊匹配</a></li>
  <li><a href="https://segmentfault.com/a/1190000003773614">MongoDB 数据自动同步到 ElasticSearch</a></li>
  <li><a href="https://github.com/mongodb-labs/mongo-connector/wiki/Resyncing%20the%20Connector">Resyncing the Connector</a></li>
  <li><a href="http://foofish.net/blog/76/mongo-connector">mongo-connector原理及改造</a></li>
  <li><a href="http://es.xiaoleilu.com/054_Query_DSL/75_Queries_with_filters.html">查询与过滤条件的合并</a></li>
  <li><a href="http://www.edwardesire.com/full-text-search-of-mongodb-with-solr/">MongoBD + Solr全文搜索的历程*</a></li>
  <li><a href="http://foofish.net/blog/76/mongo-connector">mongo-connector原理及改造</a></li>
  <li><a href="https://imququ.com/post/elasticsearch.html">使用 Elasticsearch 实现博客站内搜索</a></li>
  <li><a href="http://stackoverflow.com/questions/23846971/how-to-use-elasticsearch-with-mongodb">StackOverflow: How to use Elasticsearch with MongoDB?</a></li>
  <li><a href="https://qbox.io/blog/optimizing-search-results-in-elasticsearch-with-scoring-and-boosting">Optimizing Search Results in Elasticsearch with Scoring and Boosting</a></li>
  <li><a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/index.html">Elasticsearch: The Definitive Guide</a></li>
  <li><a href="https://www.gitbook.com/book/looly/elasticsearch-the-definitive-guide-cn/details">Elasticsearch权威指南（中文版）</a></li>
  <li><a href="https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/quick-start.html">ElasticSearch Javascript API</a></li>
  <li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html">Elasticsearch Reference</a></li>
</ul>

<h2 id="additional-reference">Additional Reference</h2>

<ul>
  <li><a href="https://www.compose.io/articles/full-text-search-with-mongodb-and-node-js/">Full Text Search with MongoDB &amp; Node.js</a></li>
  <li><a href="http://code.tutsplus.com/tutorials/full-text-search-in-mongodb--cms-24835">Full-Text Search in MongoDB</a></li>
  <li><a href="http://blog.csdn.net/yeasy/article/details/47842437">用 mongodb + elasticsearch 实现中文检索</a></li>
  <li><a href="http://www.csdn.net/article/2014-09-02/2821485-how-to-perform-fuzzy-matching-with-mongo-connector?">使用Mongo Connector和Elasticsearch实现模糊匹配</a></li>
  <li><a href="https://segmentfault.com/a/1190000003773614">MongoDB 数据自动同步到 ElasticSearch</a></li>
  <li><a href="https://github.com/mongodb-labs/mongo-connector/wiki/Resyncing%20the%20Connector">Resyncing the Connector</a></li>
  <li><a href="http://foofish.net/blog/76/mongo-connector">mongo-connector原理及改造</a></li>
  <li><a href="http://es.xiaoleilu.com/054_Query_DSL/75_Queries_with_filters.html">查询与过滤条件的合并</a></li>
  <li><a href="http://www.edwardesire.com/full-text-search-of-mongodb-with-solr/">MongoBD+Solr全文搜索的历程</a></li>
  <li><a href="https://blog.phoenixlzx.com/2014/03/22/chinese-word-split-search-with-mongodb/">*MongoDB 中文分字搜索</a></li>
</ul>


                <hr>

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2016/02/26/mongodb-internals/" data-toggle="tooltip" data-placement="top" title="A Glimpse of MongoDB Internals">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2016/02/28/postgre-sql-node/" data-toggle="tooltip" data-placement="top" title="Postgre Sql Node">Next Post &rarr;</a>
                    </li>
                    
                </ul>

                <!-- Twitter Plugin -->
<!-- Use Twitter Button In the Future-->
<!-- https://dev.twitter.com/web/tweet-button -->

<p>If you liked this post, you can
<a href="https://twitter.com/intent/tweet?url=aaronice.github.io/2016/02/27/full-text-search-mongodb-with-elasticsearch/&text=MongoDB & ElasticSearch For Full Text Search In Chinese&via=ZibingH"
   target="_blank">
  share it with your followers</a>
or
<a href="https://twitter.com/ZibingH">
  follow me on Twitter</a>!
</p>

                <div id="disqus_thread"></div>
<script>
/**
* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//aaronice.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


            </div>
        </div>
    </div>
</article>

<hr>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="https://twitter.com/ZibingH">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    
                    <li>
                        <a href="https://github.com/aaronice">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="mailto:hiaaronice@gmail.com">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p>
    <center>
        <!-- map 2D -->
        <!-- <script type="text/javascript" src="//rf.revolvermaps.com/0/0/7.js?i=5v8a54lgxyq&amp;m=0&amp;c=ff0000&amp;cr1=ffffff&amp;sx=0" async="async"></script> -->
        <!-- globe 3D -->
        <script type="text/javascript" src="//rf.revolvermaps.com/0/0/5.js?i=5lsx8zi6lm1&amp;m=0&amp;s=180&amp;c=ff0000&amp;cr1=ffffff" async="async"></script>
    </center>
</p>


                <p class="copyright text-muted">Copyright &copy; Code Is Not Cold 2016</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>

<!-- Disqus script -->
<script id="dsq-count-scr" src="//aaronice.disqus.com/count.js" async></script>


</body>

    <script>

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-58203299-2', 'auto');
ga('send', 'pageview');

</script>


</html>
